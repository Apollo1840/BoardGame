# -*- coding: utf-8 -*-
import pandas as pd

rows = []

def add(value, kind, src, src_mode, tgt, tgt_mode, desc):
    rows.append({
        "价值": value,
        "种类": kind,
        "来源": src,
        "来源方式": src_mode,
        "目标": tgt,
        "目标方式": tgt_mode,
        "描述": desc
    })

# === 基础锚点与通用动作 ===
add(1, "伤害", "玩家", "造成", "玩家", "伤害", "对对方造成5点伤害")
add(1, "战斗指令", "无", "无", "怪物", "攻击", "一次额外攻击")
add(1, "战斗指令", "无", "无", "怪物", "技能刷新", "一次技能刷新")
add(2, "效果", "无", "无", "效果", "回响", "一次效果回响")
add(1, "数值调整", "无", "无", "怪物", "强化", "基础数值（攻防合计）+5")
add(1, "抽牌/御灵", "卡堆", "顶部抽取", "玩家", "获得", "从卡堆顶部抽取获得1点灵力")
add(0.5, "信息", "玩家", "查看", "对方手牌", "查看", "查看对方一张手牌")
add(0.2, "信息", "玩家", "查看", "卡堆", "顶", "查看卡堆顶")

# === 卡堆到卡堆 ===
for mode, val, action in [
    ("随机", 0, "丢弃"),
    ("类随机", 0, "丢弃"),
    ("抽至", 0, "丢弃"),
    ("指定", 0, "丢弃"),
]:
    add(val, "卡片转移", "卡堆", mode, "卡堆", action, f"从卡堆{mode}选择一张牌{action}")
for mode, val, action in [
    ("随机", 0, "归顶"),
    ("类随机", 0, "归顶"),
    ("抽至", 0.1, "归顶"),
    ("指定", 0.2, "归顶"),
]:
    add(val, "卡片转移", "卡堆", mode, "卡堆", action, f"从卡堆{mode}选择一张牌{action}")

# === 手牌 与 卡堆：卡堆 -> 手牌 ===
add(1.0, "卡片转移", "卡堆", "随机", "手牌", "加入", "从卡堆随机取出一张加入手牌")
add(1.1, "卡片转移", "卡堆", "类随机", "手牌", "加入", "从卡堆上方抽取一张加入手牌")
add(1.2, "卡片转移", "卡堆", "随机限定", "手牌", "加入", "抽至一张限定牌加入手牌（丢弃其余）")
add(1.5, "卡片转移", "卡堆", "指定", "手牌", "加入", "从卡堆指定取出一张加入手牌")

# === 手牌 与 卡堆：手牌 -> 卡堆 ===
add(-1.0, "卡片转移", "手牌", "随机", "卡堆", "丢弃", "随机丢弃一张手牌")
add(-0.9, "卡片转移", "手牌", "随机", "卡堆", "归顶", "随机归顶一张手牌")
add(-1.2, "卡片转移", "手牌", "限定随机", "卡堆", "丢弃", "随机丢弃一种限定手牌")
add(-1.1, "卡片转移", "手牌", "限定随机", "卡堆", "归顶", "随机归顶一种限定手牌")
add(-0.5, "卡片转移", "手牌", "选择", "卡堆", "丢弃", "选择一张手牌丢弃")
add(-0.8, "卡片转移", "手牌", "选择", "卡堆", "归顶", "选择一张手牌归顶")
add(-0.9, "卡片转移", "手牌", "限选", "卡堆", "丢弃", "限定一种手牌丢弃（如预言卡）")
add(-1.0, "卡片转移", "手牌", "限选", "卡堆", "归顶", "限定一种手牌归顶")

# === 场牌 与 卡堆：卡堆 -> 场牌 ===
add(3.0, "卡片转移", "卡堆", "随机", "场牌", "使用", "从卡堆随机使用一张场牌")
add(3.2, "卡片转移", "卡堆", "类随机", "场牌", "使用", "从卡堆上方使用一张场牌")
add(3.5, "卡片转移", "卡堆", "随机限定", "场牌", "使用", "随机至限定牌并使用（丢弃其余）")
add(4.0, "卡片转移", "卡堆", "指定", "场牌", "使用", "从卡堆指定取出并使用一张牌")

# === 场牌 与 卡堆：场牌 -> 卡堆 ===
add(-3.0, "卡片转移", "场牌", "随机", "卡堆", "丢弃", "随机丢弃一张场牌")
add(-2.9, "卡片转移", "场牌", "随机", "卡堆", "归顶", "随机归顶一张场牌")
add(-3.2, "卡片转移", "场牌", "限定随机", "卡堆", "丢弃", "随机丢弃一种限定场牌")
add(-3.1, "卡片转移", "场牌", "限定随机", "卡堆", "归顶", "随机归顶一种限定场牌")
add(-2.5, "卡片转移", "场牌", "选择", "卡堆", "丢弃", "我方选择一张场牌丢弃")
add(-2.7, "卡片转移", "场牌", "选择", "卡堆", "归顶", "我方选择一张场牌归顶")
add(-3.5, "卡片转移", "对方", "选择", "我方场牌", "丢弃", "对方选择我方一张场牌丢弃")
add(-3.7, "卡片转移", "对方", "选择", "我方场牌", "归顶", "对方选择我方一张场牌归顶")
add(-2.9, "卡片转移", "我方", "限选", "我方场牌", "丢弃", "我方限定一种场牌丢弃（如怪物卡）")
add(-3.0, "卡片转移", "我方", "限选", "我方场牌", "归顶", "我方限定一种场牌归顶")
add(-3.2, "卡片转移", "对方", "限选", "我方场牌", "丢弃", "对方限定我方一种场牌丢弃")
add(-3.0, "卡片转移", "对方", "限选", "我方场牌", "归顶", "对方限定我方一种场牌归顶")

# === 手牌 与 场牌：手牌 -> 场牌 ===
add(2.0, "卡片转移", "手牌", "随机", "场牌", "使用", "随机使用一张手牌")
add(1.9, "卡片转移", "手牌", "限定随机", "场牌", "使用", "随机使用一种限定手牌（如预言卡）")
add(2.5, "卡片转移", "手牌", "选择", "场牌", "使用", "选择一张手牌使用")
add(2.0, "卡片转移", "手牌", "限选", "场牌", "使用", "限定一种手牌使用（如预言卡）")
add(4.0, "召唤", "手牌", "特殊召唤", "场牌", "落地", "特殊召唤一只3级以下怪物")

# === 手牌 与 场牌：场牌 -> 手牌 ===
add(-2.0, "卡片转移", "场牌", "随机", "手牌", "收回", "随机收回一张场牌")
add(-2.1, "卡片转移", "场牌", "限定随机", "手牌", "收回", "随机收回一种限定场牌（如怪物卡）")
add(-1.5, "卡片转移", "我方场牌", "选择", "手牌", "收回", "我方选择一张场牌收回")
add(-2.5, "卡片转移", "对方", "选择", "我方手牌", "收回", "对方选择我方一张场牌收回")
add(-1.8, "卡片转移", "我方", "限选", "我方手牌", "收回", "我方限定一种场牌收回（如怪物卡）")
add(-2.0, "卡片转移", "对方", "限选", "我方手牌", "收回", "对方限定一种场牌我方收回")

# === 免疫/效果控制 ===
add(1.0, "免疫", "无", "无", "场牌", "免疫", "一次攻击免疫（失去指定目标）")
add(1.0, "免疫", "无", "无", "场牌", "免疫", "一次效果免疫（失去指定目标）")
add(2.0, "效果控制", "无", "无", "技能/效果", "失效", "一次效果失效或技能沉默（未发动）")
add(3.0, "效果控制", "无", "无", "技能/效果", "中断", "一次效果中断（发动后在节点被中断）")
add(1.0, "免疫", "无", "无", "玩家", "免疫", "5点伤害免疫")
add(1.0, "免疫", "无", "无", "玩家", "免疫", "10点战斗或特殊伤害免疫")
add(1.0, "增伤", "无", "无", "玩家", "加强", "7点战斗或特殊伤害加强")

# === 御灵（灵力操作） ===
add(0.1, "御灵", "场牌", "吸取", "场牌", "到该怪物", "从己方场上吸取1点灵力")
add(0.2, "御灵", "场牌", "吸取", "场牌", "转移", "从己方场上转移1点灵力")
add(1.2, "御灵", "对方场牌", "吸取", "我方场牌", "到该怪物", "从对方场上吸取1点灵力")
add(1.5, "御灵", "对方场牌", "吸取", "我方场牌", "转移", "从对方场上转移1点灵力")

# === 条件价值表（作为触发成本的负修正） ===
conditions = [
    (-0.1, "时间触发"),
    (-0.2, "发动召唤触发"),
    (-0.2, "发动预言触发"),
    (-0.3, "盖牌触发"),
    (-0.5, "攻击指令触发"),
    (-0.5, "主动技能触发"),
    (-0.8, "战斗伤害触发"),
    (-1.0, "效果伤害触发"),
    (-1.0, "战斗离场触发"),
    (-1.5, "效果离场触发"),
    (-2.0, "战斗破坏触发"),
    (-2.5, "效果离场触发"),
]
for v, name in conditions:
    add(v, "触发条件", "无", "无", "无", "无", name)

# 连锁项：用占位说明 var
add(None, "触发条件", "连锁", "精确收益响应", "对方", "获得", "价值等于对方获得收益（如对方额外召唤+2）")
add(None, "触发条件", "连锁", "精确损失响应", "我方", "损失", "价值等于我方损失（如受到10点战斗伤害+2）")
add(-5, "触发条件", "连锁", "连锁之连锁", "对方响应", "我方动作", "例如对方响应了我的额外召唤")

df = pd.DataFrame(rows, columns=["价值","种类","来源","来源方式","目标","目标方式","描述"])

# 保存 CSV
path = "value_table.csv"
df.to_csv(path, index=False, encoding="utf-8-sig")
